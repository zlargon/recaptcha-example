<!DOCTYPE html>
<html>
<head>
  <title>Invisible reCAPTCHA</title>
  <script src="https://www.google.com/recaptcha/api.js" async defer></script>
</head>
<body>
  <a href="https://github.com/zlargon/recaptcha-example"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png" alt="Fork me on GitHub"></a>
  <h1>Invisible reCAPTCHA</h1>
  <form action="?" method="POST">
    <button class="g-recaptcha"
        data-callback='onSubmit'
        data-sitekey="6LdHUW8UAAAAAFr9Wc6T1Z5F5q9QuUeWGtHqPvTq">
      Submit
    </button>
    <br/>
  </form>
<script>
function onSubmit (token) {
  console.log(token);
}

function test (delay = 1000) {
  grecaptcha.execute();

  setTimeout(function () {
    const token = grecaptcha.getResponse();

    // copy to clipboard
    const textarea = document.createElement('textarea');
    textarea.value = token;
    document.body.appendChild(textarea);
    textarea.select();
    document.execCommand('copy');
    document.body.removeChild(textarea);
    console.log('token is copied to clipboard.');

    grecaptcha.reset();
  }, delay);
}
</script>
</body>
</html>
